---
layout: post
title: Rap lyrics
category: Data
tags: python
description: My attempt to justify scoffing at new rappers using Beautiful Soup
---

The gruelish semester is over! The last few weeks were busy w/ proving convergence or solving other difficult questions so I was 
glad for a little break post Christmas to code something. I enjoy listening to some hip-hop, and a rapper known as J. Cole recently
released an album. Lately, so many so called 'mumble-rappers' have emerged so I was excited to have someone I enjoyed putting out music.
Mumble-rappers have this title because people joke how they don't speak coherently during their songs and how they seem to just mumble
the same words over and over again (almost as if they have two choruses going on). With this in mind, I decided to see just how
repetitive these 'mumble rappers' are vs other 'elite' rappers (at least in my eyes). 

I wrote a script that accepts a rapper's name and his or her album. It then gets the links to each song's lyrics, scraps the number of unique words per song, and finally creates a Pandas dataframe. I ran into a couple of problems.

Additionally, I scrapped the song lengths from Wikipedia. This was actually the difficult part.
Since Wikipedia allows anyone to edit it's page, many of the album's pages have different formats - some of the info is stored in table, other's 
have the same type of information in an unordered list.. the labels are different, etc. Due to this, I pretty much made it work for the people
I was interested in, so it's not generalizable to any artist. 

1. The page that held each song's link included links to the album's cover, tracklist, etc. Thankfully, each link to a song
was accompanied by the track number (which the undesired links had question marks), so I just I just wrote a function called albumLen that helped me get links only accompanied by a track number.
2. The entire wikipedia thing. I had so many issues come up because there was not a consistent format for the album. My code only works if the album information is in a certain table format that fit my needs. If I try to make this into something cooler, like an app, then I'll need to make it more robust. Or find a better website that gives me song lengths.
3. I don't distinguish between who is rapping in the song. Artist like J. Cole, who is known for not have nyone featured on his albums are easy but others have features on practically every song. I can imagine someone more eloquent or orignal features one of the mumble rappers or vice versa and thus skewing my results.. but I think that's a very rare event.

Scaping tables w/ Python was a bit more of a pain compared to R in my opinion.. instead of 
{% highlight ruby %} 
tab = soup.find('table', {'class' : 'some class'})
for row in tab.findAll('tr')[some length]
  col = row.findAll('td')[some index if desired].text
  do cool stuff with col
  store col
{% endhighlight %}

I only had to do 
{% highlight ruby %} 
song_length <- read_html(url) %>% 
                html_node("some css selector") %>% 
                html_table(fill = TRUE)
{% endhighlight %}

But I'm sure there might be some issue regarding table format that Python excels in when scraping.

When plotting, I used Seaborn accompanied with adjustText, which is a really neat package inspired from
things like ggrepel in R. You can see it below. Now, onto some plots!

{% highlight ruby %} rapperDriver('kendrick lamar', 'to pimp a butterfly') {% endhighlight %}
![png](/ipynb/rappers_1_1.png)

